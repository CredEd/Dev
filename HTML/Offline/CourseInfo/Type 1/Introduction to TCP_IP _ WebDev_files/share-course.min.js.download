$(document).ready(function(){function u(){var f=document.getElementsByClassName("contact-email"),r="",u;if(f.length>0){for(u=0;u<f.length;u++)f[u].value!="undefined"&&(r+=f[u].value+",");r=r.substring(0,r.length-1);$.ajax({url:"/Courses/ShareCourse",type:"POST",dataType:"json",data:{courseId:n,tableName:t,courseUrl:i,contacts:r,message:$("#shareMessage").val()},success:function(){$("#share-course").modal("hide");swal("Message Sent","Thanks, keep up with sharing knowledge!","success")},error:function(){alert("Something went wrong.")}})}else $("#shareMessageButton").attr("disabled",!0)}var n=undefined,t=undefined,i=undefined,r;$("#share-course").on("show.bs.modal",function(r){n=$(r.relatedTarget).data("course-id");t=$(r.relatedTarget).data("course-tablename");i=$(r.relatedTarget).data("course-url");var u=$(r.relatedTarget).data("course-title"),f=$(r.relatedTarget).data("course-img");$('div[id="course-img"]').css("background-image","url("+f+")");$(r.currentTarget).find('span[id="course-title"]')[0].innerHTML=u});$("#share-course").on("hide.bs.modal",function(){try{$("#shareMessage").val("");msContacts.clear()}catch(n){$(".ms-contact-input").val("")}});r=function(){$.ajax({url:"/Profile/GetMatchingUser",type:"POST",cache:!1,dataType:"json",success:function(n){msContacts=$("#ms-contacts").magicSuggest({placeholder:"User Name or Email",data:n,valueField:"id",displayField:"label",renderer:function(n){return'<div style="padding: 5px; overflow:hidden;"><div style="float: left;"><img src="'+n.image+'" class="mt-sm img-circle thumb32"/><\/div><div style="float: left; margin-left: 5px"><div style="font-weight: bold; color: #333; font-size: 11px; line-height: 11px">'+n.label+'<\/div><div style="color: #999; font-size: 10px">'+n.description+'<\/div><\/div><\/div><div style="clear:both;"><\/div>'},resultAsString:!0,resultAsStringDelimiter:" ",allowFreeEntries:!0,maxEntryLength:24,highlight:!1,maxDropHeight:145,maxSuggestions:5,maxSelection:3,minChars:2,useTabKey:!0,useCommaKey:!0,required:!0,vtype:"alpha, email",selectionRenderer:function(n){var t=undefined;return n.image==null?'<div style="overflow:hidden;height:35px;"><div style="float: left;"><\/div><div style="float: left;margin-top: 10px; margin-left: 5px;display:inline-block;"><span style="color: #333; font-size: 11px;">'+n.label+'<\/span><\/div><input type="hidden" class="contact-email" value="'+n.label+'" /><\/div><div style="clear:both;"><\/div>':'<div style="overflow:hidden;height:35px;"><div style="float: left;"><img src="'+n.image+'" class="mt-sm img-circle thumb32"/><\/div><div style="float: left;margin-top: 10px; margin-left: 5px;display:inline-block;"><span style="color: #333; font-size: 11px;">'+n.label+'<\/span><\/div><input type="hidden" class="contact-email" value="'+n.email+'" /><\/div><div style="clear:both;"><\/div>'}})},error:function(){}})};document.getElementById("shareMessageButton").addEventListener("click",u);r();$("#shareMessageButton").attr("disabled",!0);$("#shareMessage").keyup(function(){$(this).val().length!=0?$("#shareMessageButton").attr("disabled",!1):$("#shareMessageButton").attr("disabled",!0)})});